# EMS 远程管理工具

这是一个使用 [Tauri](https://tauri.app/) 和 Rust 构建的跨平台桌面应用，用于远程管理 Linux 服务器。它提供了一个现代化的图形用户界面来执行常见的运维任务，具有专业的终端体验和智能化的管理功能。

## ✨ 核心功能

### 🔐 SSH 连接管理
- **安全连接**: 使用 IP 地址、用户名和密码安全地连接到远程 Linux 主机
- **连接历史**: 自动保存连接记录，支持快速重连，最多保存20条历史记录
- **连接状态监控**: 实时显示连接状态，支持连接状态检查和自动重连
- **智能断开**: 主动断开SSH会话，确保连接完全关闭

### 💻 终端控制台
- **专业终端体验**: 模拟真实Linux终端，支持命令执行和交互
- **颜色区分显示**:
  - 用户命令：亮白色加粗
  - 系统输出：绿色
  - 错误信息：红色加粗
  - 提示符：黄色加粗
  - 注释信息：灰色斜体
- **命令历史**: 支持上下箭头导航历史命令
- **智能提示**: 提供常用命令的使用提示和说明
- **别名支持**: 自动转换常用别名（ll → ls -l, la → ls -la等）
- **工作目录管理**: 智能跟踪和切换工作目录

### 📁 文件传输
- **SFTP上传**: 支持将本地文件安全上传到远程服务器
- **目录管理**: 默认上传到 `/ems` 目录，支持自定义路径
- **传输进度**: 可视化显示文件传输进度

### 🌐 网络配置
- **接口检测**: 自动检测并列出远程服务器上的所有网络接口
- **配置管理**: 查看和修改网络接口的IP地址、子网掩码和默认网关
- **实时更新**: 支持网络配置的实时查看和修改

### ⚙️ 服务管理 (Systemd)
- **服务导入**: 导入新的 `systemd` 服务单元文件
- **生命周期控制**: 启动、停止、重启服务
- **自启动管理**: 启用、禁用服务的开机自启动
- **状态监控**: 实时查询服务的运行状态和详细信息
- **服务搜索**: 支持按名称搜索系统服务
- **故障诊断**: 提供服务故障诊断和修复建议

### 📊 实时日志系统
- **操作日志**: 记录所有后端操作的详细日志
- **分级显示**: 支持INFO、WARN、ERROR等不同级别的日志
- **实时更新**: 日志实时显示，支持自动滚动
- **日志管理**: 支持清空日志和日志导出

## 🛠️ 技术栈

### 后端 (Rust + Tauri)
- **核心框架**: [Tauri](https://tauri.app/) - 使用 Web 技术构建轻量、快速、安全的跨平台桌面应用
- **语言**: Rust 2021 Edition
- **核心依赖**:
  - `ssh2`: SSH和SFTP连接处理，支持密码认证和会话管理
  - `tokio`: 异步运行时，提供高性能的并发处理
  - `serde`: 数据序列化和反序列化，支持JSON通信
  - `anyhow`: 错误处理，提供更好的错误信息
  - `chrono`: 时间处理，用于日志时间戳
  - `uuid`: 唯一标识符生成

### 前端 (Vue 3 + TypeScript)
- **框架**: Vue 3.4+ with Composition API
- **语言**: TypeScript 5.3+
- **UI组件库**: Element Plus 2.4+ (完整的Vue 3组件生态)
- **状态管理**: Pinia 2.1+ (Vue官方推荐的状态管理库)
- **路由**: Vue Router 4.2+ (支持TypeScript的路由系统)
- **构建工具**: Vite 5.0+ (极速的前端构建工具)
- **开发工具**:
  - `unplugin-auto-import`: 自动导入Vue和组件库API
  - `unplugin-vue-components`: 自动导入和注册组件
  - `vue-tsc`: TypeScript类型检查
  - `pinia-plugin-persistedstate`: 状态持久化插件

## 🎨 UI重构亮点

### 现代化设计
- **Material Design风格**: 采用现代化的设计语言，提供更好的视觉体验
- **响应式布局**: 支持不同屏幕尺寸，界面自适应调整
- **优雅动画**: 流畅的过渡动画和交互反馈
- **专业配色**: 精心设计的配色方案，提升用户体验
- **深色主题**: 专业的终端深色主题，减少眼部疲劳

### 组件化架构
- **Vue 3 Composition API**: 更好的代码组织和逻辑复用
- **Element Plus组件库**: 丰富的UI组件，保证界面一致性
- **TypeScript支持**: 类型安全，提高开发效率和代码质量
- **模块化设计**: 清晰的文件结构，便于维护和扩展
- **自动导入**: 无需手动导入，提高开发效率

### 用户体验提升
- **智能表单验证**: 实时验证用户输入，提供友好的错误提示
- **状态管理**: 使用Pinia进行全局状态管理，数据流清晰
- **状态持久化**: 自动保存用户设置和连接历史
- **加载状态**: 优雅的加载动画和进度提示
- **操作反馈**: 丰富的通知系统，及时反馈操作结果

### 功能增强
- **专业终端体验**:
  - 真实的Linux终端模拟
  - 语法高亮和颜色区分
  - 命令历史和智能提示
  - 工作目录跟踪
- **SSH连接管理**:
  - 连接历史记录
  - 快速重连功能
  - 连接状态监控
- **高级数据表格**: 支持排序、筛选、分页的日志查看
- **文件上传进度**: 可视化的文件传输进度条
- **网络接口管理**: 直观的网络配置界面
- **服务状态监控**: 实时显示服务运行状态和详细信息

## 🚀 如何开始

### 1. 环境准备

在开始之前，请确保您已经安装了 [Rust](https://www.rust-lang.org/tools/install) 和 [Node.js](https://nodejs.org/) (包含 npm)。

同时，您需要根据您的操作系统，安装 Tauri 的系统依赖。请参考官方文档：[Prerequisites for Tauri Development](https://tauri.app/v1/guides/getting-started/prerequisites)。

### 2. 安装依赖

克隆项目后，在项目根目录打开终端，运行以下命令来安装前端和后端的依赖：

```bash
# 安装 Node.js 依赖
npm install

# Cargo 会在第一次运行时自动处理 Rust 依赖
```

### 3. 运行开发环境

安装完依赖后，使用以下命令启动应用进入开发模式。应用会以开发模式启动，并开启热重载。

```bash
npm run tauri dev
```

### 4. 构建生产版本

要构建一个可分发的、经过优化的生产版本，请运行：

```bash
npm run tauri build
```
构建产物将位于 `/src-tauri/target/release/bundle/` 目录下。

## � 快速开始指南

### 1. 建立SSH连接
1. 启动应用后，在SSH连接页面输入远程服务器信息
2. 填写IP地址、端口（默认22）、用户名和密码
3. 点击"连接"按钮建立SSH连接
4. 连接成功后，信息会自动保存到历史记录中

### 2. 使用终端控制台
1. 连接SSH后，切换到"终端"页面
2. 在命令输入框中输入Linux命令
3. 支持的功能：
   - 使用上下箭头键浏览命令历史
   - 支持常用别名（ll, la, l等）
   - 自动显示命令提示和说明
   - 彩色输出区分不同类型的内容

### 3. 文件传输
1. 在"文件传输"页面选择本地文件
2. 指定远程服务器的目标路径
3. 点击上传，查看传输进度

### 4. 网络配置管理
1. 在"网络配置"页面查看所有网络接口
2. 选择要配置的接口
3. 修改IP地址、子网掩码、网关等设置

### 5. 服务管理
1. 在"服务管理"页面查看系统服务
2. 支持启动、停止、重启服务
3. 管理服务的开机自启动状态
4. 查看服务详细状态和日志

## 🔧 高级功能

### 终端功能特性
- **命令别名支持**: 自动转换 `ll` → `ls -l`, `la` → `ls -la` 等
- **工作目录跟踪**: 智能跟踪当前工作目录，支持相对路径操作
- **颜色语法高亮**:
  - 命令输入：白色加粗
  - 正常输出：绿色
  - 错误信息：红色加粗
  - 系统提示：黄色加粗
  - 注释信息：灰色斜体
- **智能命令提示**: 输入命令时显示使用说明和参数提示

### SSH连接管理
- **连接历史**: 自动保存最近20次连接记录
- **快速重连**: 点击历史记录即可快速重新连接
- **连接状态监控**: 实时检测连接状态，支持断线重连
- **安全断开**: 主动关闭SSH会话，确保连接完全释放

### 状态持久化
- **自动保存**: 连接历史、终端输出、用户设置自动保存
- **跨会话恢复**: 重启应用后自动恢复之前的状态
- **数据安全**: 敏感信息加密存储，保护用户隐私

## �📁 项目结构

```
.
├── index.html                # 应用主页面
├── src/                      # 前端文件 (Vue 3 + TypeScript)
│   ├── main.ts               # 应用入口
│   ├── App.vue               # 根组件
│   ├── router/               # 路由配置
│   │   └── index.ts          # 路由定义和导航守卫
│   ├── stores/               # Pinia状态管理
│   │   ├── ssh.ts            # SSH连接状态和历史管理
│   │   ├── terminal.ts       # 终端状态和命令执行
│   │   └── logs.ts           # 日志状态和管理
│   ├── views/                # 页面组件
│   │   ├── Layout.vue        # 主布局组件
│   │   ├── SSH/              # SSH连接管理
│   │   │   └── index.vue     # SSH连接页面
│   │   ├── Terminal/         # 终端控制台
│   │   │   └── index.vue     # 终端页面
│   │   ├── FileTransfer/     # 文件传输
│   │   │   └── index.vue     # 文件传输页面
│   │   ├── Network/          # 网络配置
│   │   │   └── index.vue     # 网络配置页面
│   │   ├── Services/         # 服务管理
│   │   │   └── index.vue     # 服务管理页面
│   │   └── Logs/             # 日志查看
│   │       └── index.vue     # 日志页面
│   └── styles/               # 样式文件
│       └── index.css         # 全局样式和主题
├── src-tauri/                # 后端 Rust & Tauri 配置
│   ├── build.rs              # Tauri 构建脚本
│   ├── Cargo.toml            # Rust 依赖配置
│   ├── icons/                # 应用图标资源
│   ├── src/                  # Rust 源码
│   │   ├── main.rs           # 应用入口，Tauri 初始化和命令注册
│   │   ├── ssh.rs            # SSH 连接、命令执行和会话管理
│   │   ├── file_transfer.rs  # SFTP 文件传输功能
│   │   ├── network.rs        # 网络接口配置管理
│   │   ├── service.rs        # Systemd 服务管理和监控
│   │   └── logger.rs         # 日志处理和存储
│   └── tauri.conf.json       # Tauri 核心配置文件
├── auto-imports.d.ts         # 自动导入类型声明
├── components.d.ts           # 组件类型声明
├── vite.config.ts            # Vite 构建配置
├── tsconfig.json             # TypeScript 配置
├── tsconfig.node.json        # Node.js TypeScript 配置
└── package.json              # 前端依赖和脚本配置
```